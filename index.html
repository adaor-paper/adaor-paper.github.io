<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continuous Control of Editing Models <br/> via Adaptive-Origin Guidance</title>
    
    <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
    
    <meta property="og:site_name" content="Adaptive-Origin Guidance">
    <meta property="og:title" content="Continuous Control of Editing Models via Adaptive-Origin Guidance">
    <meta property="og:description" content="Smooth and continuous control over edit intensity in diffusion-based image and video editing">
    <meta property="og:type" content="website">

    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.6;
            color: #e0e0e0;
            background-color: #1a1a1a;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .header {
            margin-bottom: 0;
            background: transparent;
            padding: 0;
            box-shadow: none;
            position: relative;
            z-index: 1;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            right: 50%;
            margin-left: -50vw;
            margin-right: -50vw;
            width: 100vw;
            height: 380px;
            background: linear-gradient(180deg, 
                rgba(0, 55, 254, 1) 0%, 
                rgba(0, 55, 254, 1) 3%,
                rgba(0, 55, 254, 0.96) 10%,
                rgba(0, 55, 254, 0.90) 18%,
                rgba(0, 55, 254, 0.82) 26%,
                rgba(0, 55, 254, 0.72) 35%,
                rgba(0, 55, 254, 0.60) 44%,
                rgba(0, 55, 254, 0.47) 53%,
                rgba(0, 55, 254, 0.34) 62%,
                rgba(0, 55, 254, 0.23) 71%,
                rgba(0, 55, 254, 0.14) 80%,
                rgba(0, 55, 254, 0.07) 88%,
                rgba(0, 55, 254, 0.03) 94%,
                rgba(26, 26, 26, 0.5) 97%,
                rgba(26, 26, 26, 1) 100%);
            pointer-events: none;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px 40px 40px;
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .title {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 0;
            line-height: 1.4;
            color: white;
            font-family: 'Google Sans', sans-serif;
            background: transparent;
            padding: 30px 0 0 0;
            border-radius: 0;
            display: block;
            margin-left: 0;
            margin-right: 0;
            margin-top: 0;
            box-shadow: none;
            position: relative;
            width: 100%;
        }

        /* Header Authors */
        .header-authors {
            margin: 0;
            font-size: 1.5em;
        }

        .header-author {
            display: inline-block;
            margin: 0 15px 8px 0;
            font-weight: 500;
            color: #e0e0e0;
            font-family: 'Noto Sans', sans-serif;
        }

        .header-author a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .header-author a:hover {
            border-bottom-color: #3498db;
        }

        /* Header Affiliations */
        .header-affiliations {
            margin: 0;
            font-size: 1.05em;
        }

        .header-affiliation {
            color: #b0b0b0;
            font-style: italic;
            margin: 0 10px;
        }

        /* TLDR Section */
        .tldr-section {
            margin: 30px auto;
            padding: 20px 25px;
            background-color: rgba(52, 152, 219, 0.1);
            border-left: 4px solid #3498db;
            border-radius: 0 8px 8px 0;
            max-width: 900px;
        }

        .tldr-title {
            color: #3498db;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .tldr-content {
            color: #e0e0e0;
            font-size: 1.05em;
            line-height: 1.7;
            margin: 0;
        }

        .highlight-text {
            color: #3498db;
            font-weight: 700;
        }

        /* Links */
        .links {
            margin: 10px 0 0 0;
            text-align: center;
        }

        .link-btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 0 8px;
            background: #2c2c2c;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 500;
            transition: background 0.3s, transform 0.2s;
            border: 1px solid #3498db;
        }

        .link-btn:hover {
            background: #3498db;
            transform: translateY(-2px);
        }

        .link-btn .icon {
            margin-right: 8px;
        }

        /* Header Demo Video */
        .header-demo {
            max-width: 800px;
            margin: 40px auto 0;
            background: #2c2c2c;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 6px 25px rgba(0,0,0,0.5);
        }

        .header-demo-video {
            width: 100%;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .header-demo-controls {
            margin-top: 20px;
        }

        .header-demo-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, #e0e0e0 0%, #3498db 0%);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .header-demo-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .header-demo-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .header-demo-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9em;
            color: #fff;
        }

        .header-demo-caption {
            text-align: center;
            color: #fff;
            font-size: 1em;
            margin-top: 15px;
            font-style: italic;
        }

        .alpha-value {
            font-weight: bold;
            color: #fff;
        }

        /* Abstract Section */
        .abstract-section {
            max-width: 900px;
            margin: 60px auto;
            padding: 0 20px;
        }

        .abstract-section h2 {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #3498db;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .abstract-text {
            font-size: 1.05em;
            line-height: 1.8;
            text-align: justify;
            color: #e0e0e0;
        }

        /* Method Section */
        .method-section {
            max-width: 1200px;
            margin: 60px auto;
            padding: 0 20px;
        }

        .method-section h2 {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #3498db;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .method-overview {
            font-size: 1.05em;
            line-height: 1.8;
            text-align: justify;
            color: #e0e0e0;
            margin-bottom: 30px;
        }

        .method-figures {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .method-figure {
            text-align: center;
            background: #2c2c2c;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .method-figure img {
            width: 100%;
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .method-figure-caption {
            font-size: 0.95em;
            color: #b0b0b0;
            line-height: 1.5;
            margin-top: 10px;
        }

        .method-figure-title {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
            font-size: 1.05em;
        }

        .method-explanation {
            max-width: 900px;
            margin: 30px auto;
            padding: 20px 25px;
            background: #2c2c2c;
            border-radius: 10px;
            font-size: 1.05em;
            line-height: 1.8;
            color: #e0e0e0;
        }

        /* Results Section */
        .results-section {
            margin: 30px 0;
            padding: 20px 20px;
            background: transparent;
        }

        .results-section h2 {
            font-size: 2em;
            font-weight: 600;
            margin-bottom: 16px;
            color: #3498db;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        .section-description {
            text-align: center;
            max-width: 800px;
            margin: 0 auto 20px auto;
            color: #b0b0b0;
            font-size: 1.05em;
        }

        /* Carousel Navigation */
        .carousel-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        .carousel-wrapper {
            overflow: hidden;
            position: relative;
        }

        .carousel-content {
            display: flex;
            transition: transform 0.4s ease;
        }

        .carousel-slide {
            min-width: 100%;
            box-sizing: border-box;
        }

        #portrait-carousel .carousel-slide {
            min-width: 50%;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(52, 152, 219, 0.9);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .carousel-nav:hover {
            background: rgba(41, 128, 185, 1);
        }

        .carousel-nav.prev {
            left: 10px;
        }

        .carousel-nav.next {
            right: 10px;
        }

        .carousel-indicators {
            text-align: center;
            margin: 20px 0;
        }

        .carousel-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ccc;
            margin: 0 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .carousel-dot.active {
            background: #3498db;
        }

        .global-alpha-control {
            max-width: 900px;
            margin: 15px auto 0;
            padding: 0;
            background: none;
            border: none;
            border-radius: 0;
            box-shadow: none;
        }

        .global-slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .global-slider {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, #e0e0e0 0%, #3498db 0%);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .global-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .global-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .global-alpha-display {
            font-weight: bold;
            color: #3498db;
            font-size: 1.1em;
            min-width: 80px;
            text-align: center;
        }

        /* Video Gallery */
        .slider-demo-container {
            max-width: 950px;
            margin: 0 auto 50px auto;
            padding: 30px;
        }

        .prompt-box {
            background: none;
            border: none;
            padding: 0;
            margin: 10px 0 20px 0;
            text-align: center;
            font-size: 1.05em;
            font-weight: 500;
            color: #fff;
        }

        .prompt-text {
            color: inherit;
            font: inherit;
            font-weight: 500;
        }

        .reference-edit-prompt {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 2.6em;
            max-height: 2.6em;
            overflow: hidden;
            line-height: 1.3;
            font-size: 0.95em;
            margin-bottom: 8px;
        }

        .portrait-pair-row {
            display: flex;
            gap: 16px;
            justify-content: center;
            align-items: center;
            flex-wrap: nowrap;
        }

        .portrait-pair-item {
            text-align: center;
            flex: 1 1 0;
            min-width: 0;
        }

        .prompt-label {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .alpha-videos-row {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .alpha-video-item {
            flex: 0 0 auto;
            width: calc(16.666% - 10px);
            min-width: 120px;
            max-width: 180px;
            text-align: center;
        }

        .alpha-video-item video {
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .alpha-video-item video:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }

        .alpha-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-weight: bold;
        }

        .transient-video-container {
            text-align: center;
            max-width: 500px;
            margin: 20px auto 0;
        }

        .transient-video-container video {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .transient-video-container video:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }

        .transient-label {
            font-size: 14px;
            color: #3498db;
            margin-top: 8px;
            font-weight: bold;
        }

        /* Image Gallery */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .image-item {
            background: #252525;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            padding: 20px;
        }

        .image-item .prompt-box {
            height: auto;
            overflow: visible;
            margin-top: 0;
            margin-bottom: 10px;
        }

        .shared-reference-section .slider-demo-container {
            margin-bottom: 20px;
        }

        .shared-reference-section .carousel-indicators {
            margin: 10px 0;
        }

        .shared-reference-section .global-alpha-control {
            margin-top: 8px;
        }

        .image-item .image-pair {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .image-item .image-pair img {
            width: 100%;
            border-radius: 8px;
        }

        .image-item .image-labels {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 14px;
            color: #e0e0e0;
        }

        .image-item.portrait .image-pair {
            flex-direction: row;
            gap: 15px;
        }

        .image-item.portrait .image-pair img {
            width: 50%;
        }

        .image-item.portrait .image-labels {
            flex-direction: row;
            justify-content: space-around;
        }

        .image-slider-container {
            margin-top: 15px;
            text-align: center;
        }

        .alpha-slider {
            width: 100%;
            max-width: 100%;
            cursor: pointer;
        }

        /* Video Modal */
        .video-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .video-modal.active {
            display: flex;
        }

        .video-modal-content video {
            max-width: 90%;
            max-height: 75vh;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }

        .video-modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: white;
            cursor: pointer;
            z-index: 10000;
            transition: color 0.2s;
        }

        .video-modal-close:hover {
            color: #ff6b6b;
        }

        .video-modal-label {
            color: white;
            font-size: 18px;
            margin-top: 15px;
            font-weight: bold;
        }

        /* Citation Footer */
        .citation-footer {
            background: #2c3e50;
            color: white;
            padding: 40px 20px;
            margin-top: 80px;
        }

        .citation-footer h3 {
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }

        .bibtex-container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .bibtex-code {
            background: #34495e;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .copy-bibtex-btn {
            display: block;
            margin: 15px auto 0;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
        }

        .copy-bibtex-btn:hover {
            background: #2980b9;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .title {
                font-size: 1.8em;
            }
            
            .header-author {
                display: block;
                margin: 8px 0;
            }
            
            .alpha-video-item {
                width: calc(33.333% - 10px);
            }
            
            .image-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Video Modal -->
    <div class="video-modal" id="video-modal">
        <span class="video-modal-close" id="modal-close">&times;</span>
        <div class="video-modal-content">
            <video id="modal-video" autoplay loop muted playsinline></video>
        </div>
        <div class="video-modal-label" id="modal-label"></div>
    </div>

    <!-- Header Section -->
    <header class="header">
        <div class="header-content">
            <h1 class="title">Continuous Control of Editing Models <br/> via Adaptive-Origin Guidance</h1>
            
            <!-- Authors (commented out for anonymous submission) -->
            <!--
            <div class="header-authors">
                <span class="header-author">A. Wolf<sup>1,2</sup></span>
                <span class="header-author">O. Patashnik<sup>1</sup></span>
                <span class="header-author">C. Katzir<sup>2</sup></span>
                <span class="header-author">K. Aberman<sup>2</sup></span>
            </div>

            <div class="header-affiliations">
                <span class="header-affiliation"><sup>1</sup>Tel Aviv University, Israel</span>
                <span class="header-affiliation"><sup>2</sup>Decart.ai</span>
            </div>
            -->

            <div class="header-authors">
                <span class="header-author">Anonymous Authors</span>
            </div>
            <!-- <div class="header-affiliations">
                <span class="header-affiliation">SIGGRAPH 2026 Submission ID 399</span>
            </div> -->

            

            <!-- Links -->
            <div class="links">
                <a href="https://arxiv.org/abs/2602.03826" class="link-btn" target="_blank" rel="noopener noreferrer">
                    <span class="icon">ðŸ“š</span>
                    <span>arXiv</span>
                </a>
                <!-- <a href="#" class="link-btn">
                    <span class="icon">ðŸ¤—</span>
                    <span>HF (Soon)</span>
                </a> -->
            </div>

            <!-- Interactive Demo -->
            <div class="header-demo">
                <video id="header-demo-video" class="header-demo-video" muted playsinline>
                    <source src="assets/videos/bunny_to_chocolate_480_832_32/transient_output.mp4" type="video/mp4">
                </video>
                <div class="header-demo-controls">
                    <input type="range" id="header-demo-slider" class="header-demo-slider" min="0" max="100" value="0">
                    <div class="header-demo-labels">
                        <span>Î± = 0.00 (Original)</span>
                        <span class="alpha-value" id="alpha-display">Î± = 0.00</span>
                        <span>Î± = 1.00 (Full Edit)</span>
                    </div>
                </div>
                <div class="header-demo-caption">
                    "Replace the white bunny with a chocolate bunny made of brown chocolate"
                </div>
            </div>

            <!-- TL;DR -->
            <div class="tldr-section">
                <div class="tldr-title">TL;DR</div>
                <div class="tldr-content">
                    We introduce <span class="highlight-text">Adaptive-Origin Guidance (AdaOr)</span>, enabling smooth and continuous control over edit intensity in diffusion-based image and video editing models without requiring per-edit optimization or specialized datasets. Leveraging the Classifier-Free Guidance (CFG) framework, we introduce a learnable identity instruction (&lt;id&gt;) to establish a semantically valid guidance origin, enabling linear interpolation between the input image and the target edit.
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Abstract Section -->
        <!-- <section class="abstract-section">
            <h2>Abstract</h2>
            <p class="abstract-text">
                Diffusion-based editing models have emerged as a powerful tool for semantic image and video manipulation. However, existing models lack a mechanism for smoothly controlling the intensity of text-guided edits. In standard text-conditioned generation, Classifier-Free Guidance (CFG) impacts prompt adherence, suggesting it as a potential control for edit intensity in editing models. However, we show that scaling CFG in these models does not produce a smooth transition between the input and the edited result.
            </p>
            <p class="abstract-text" style="margin-top: 15px;">
                We attribute this behavior to the unconditional prediction, which serves as the guidance origin and dominates the generation at low guidance scales, while representing an arbitrary manipulation of the input content. To enable continuous control, we introduce <strong>Adaptive-Origin Guidance (AdaOr)</strong>, a method that adjusts this standard guidance origin with an identity-conditioned adaptive origin, using an identity instruction corresponding to the identity manipulation.
            </p>
            <p class="abstract-text" style="margin-top: 15px;">
                By interpolating this identity prediction with the standard unconditional prediction according to the edit strength, we ensure a continuous transition from the input to the edited result. We evaluate our method on image and video editing tasks, demonstrating that it provides smoother and more consistent control compared to current slider-based editing approaches. Our method incorporates an identity instruction into the standard training framework, enabling fine-grained control at inference time without per-edit procedure or reliance on specialized datasets.
            </p>
        </section> -->

        <!-- Method Section -->
        <section class="method-section">
            <h2>Method</h2>
            <p class="method-overview">
                The key observation of our work is that the limitation of CFG in controlling editing strength arises from the dominance of the unconditional prediction at low guidance scales. In instruction-based editing settings, the unconditional prediction typically corresponds to an arbitrary manipulation of the input rather than faithful reconstruction. Consequently, when the guidance scale is varied, low guidance values do not induce small semantic changes around the input.
            </p>

            <div class="method-figures">
                <div class="method-figure">
                    <img src="assets/method/scheme_a_new.jpg" alt="Standard CFG">
                    <div class="method-figure-title">(a) Standard CFG</div>
                    <div class="method-figure-caption">
                        Null-condition as origin. The origin is given by Îµ<sub>t</sub>(âˆ…), and the guidance direction is Îµ<sub>t</sub>(c<sub>T</sub>) - Îµ<sub>t</sub>(âˆ…).
                    </div>
                </div>

                <div class="method-figure">
                    <img src="assets/method/scheme_b_new.jpg" alt="Adaptive Origin Guidance">
                    <div class="method-figure-title">(b) Adaptive Origin (Ours)</div>
                    <div class="method-figure-caption">
                        Null-identity interpolated origin. The origin is interpolated between the identity prediction Îµ<sub>t</sub>(REC) and the standard null prediction Îµ<sub>t</sub>(âˆ…), as a function of the edit strength.
                    </div>
                </div>

                <div class="method-figure">
                    <img src="assets/method/scheme_c_new.jpg" alt="Edit Progression Comparison">
                    <div class="method-figure-title">(c) Edit Progression Comparison</div>
                    <div class="method-figure-caption">
                        Varying CFG scale vs AdaOr edit strength. Standard CFG originates from arbitrary edits, while AdaOr smoothly transitions from the input image to the target edit.
                    </div>
                </div>
            </div>

            <!-- <div class="method-explanation">
                <p style="margin-bottom: 15px;">
                    <strong>Geometric Interpretation:</strong> In both (a) and (b), we illustrate a single denoising step in which the latent z<sub>t</sub> lies on the manifold of the marginal distribution p<sub>t</sub>. The origin prediction first denoises z<sub>t</sub> toward the manifold of the less noisy distribution p<sub>t-1</sub>, after which the trajectory is steered on this manifold toward better alignment with the conditioning signal.
                </p>
                <p style="margin-bottom: 15px;">
                    In <strong>standard CFG</strong> (a), the origin is dominated by the unconditional prediction at low guidance scales, leading to arbitrary deviations from the source content.
                </p>
                <p>
                    In <strong>Adaptive Origin Guidance</strong> (b), we interpolate between the identity prediction and the standard null prediction as a function of edit strength. This ensures faithful reconstruction at low strengths while smoothly recovering standard CFG behavior at higher strengths, enabling precise control over manipulation intensity.
                </p>
            </div> -->

            <p class="method-overview">
                To enable smooth control over edit strength, we introduce an <strong>identity instruction</strong> â€” an instruction that corresponds to the identity manipulation, reproducing the input content without any semantic modification. Building on this, we introduce a guidance mechanism where the term that dominates the prediction at low scales (i.e., the origin) is adjusted according to the desired edit strength. Specifically, we interpolate between the identity prediction and the standard unconditional prediction.
            </p>
            <p class="method-overview">
                By assigning greater weight to the identity term at lower edit strengths and transitioning to the standard term at higher strengths, our method enables smooth, continuous control over manipulation intensity without requiring per-edit optimization or specialized datasets.
            </p>
        </section>
    </div>

    <!-- Video Results Section -->
    <section class="results-section">
        <div class="container">
            <h2>Results</h2>

            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <button class="carousel-nav prev" id="video-prev">â€¹</button>
                    <button class="carousel-nav next" id="video-next">â€º</button>
                    <div class="carousel-content" id="video-carousel">
                        <!-- Video slides will be populated here -->
                    </div>
                </div>
                <div class="carousel-indicators" id="video-indicators"></div>
            </div>

            <div class="global-alpha-control">
                <div class="global-slider-container">
                    <span>Î± = 0.00</span>
                    <input type="range" class="global-slider" id="video-global-slider" min="0" max="100" value="50">
                    <span>Î± = 1.00</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Image Results Section -->
    <section class="results-section">
        <div class="container">
            <h2></h2>

            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <button class="carousel-nav prev" id="image-prev">â€¹</button>
                    <button class="carousel-nav next" id="image-next">â€º</button>
                    <div class="carousel-content" id="image-carousel">
                        <!-- Image slides will be populated here -->
                    </div>
                </div>
                <div class="carousel-indicators" id="image-indicators"></div>
            </div>

            <div class="global-alpha-control">
                <div class="global-slider-container">
                    <span>Î± = 0.00</span>
                    <input type="range" class="global-slider" id="image-global-slider" min="0" max="100" value="50">
                    <span>Î± = 1.00</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Shared Reference Results Section -->
    <section class="results-section shared-reference-section">
        <div class="container">
            <h2></h2>

            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <button class="carousel-nav prev" id="reference-prev">â€¹</button>
                    <button class="carousel-nav next" id="reference-next">â€º</button>
                    <div class="carousel-content" id="reference-carousel">
                        <!-- Reference slides will be populated here -->
                    </div>
                </div>
                <div class="carousel-indicators" id="reference-indicators"></div>
            </div>

            <div class="global-alpha-control">
                <div class="global-slider-container">
                    <span>Î± = 0.00</span>
                    <input type="range" class="global-slider" id="reference-global-slider" min="0" max="100" value="50">
                    <span>Î± = 1.00</span>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <span class="global-alpha-display" id="reference-alpha-display">Î± = 0.5</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Portrait Format Results Section -->
    <section class="results-section">
        <div class="container">
            <h2></h2>

            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <button class="carousel-nav prev" id="portrait-prev">â€¹</button>
                    <button class="carousel-nav next" id="portrait-next">â€º</button>
                    <div class="carousel-content" id="portrait-carousel">
                        <!-- Portrait slides will be populated here -->
                    </div>
                </div>
                <div class="carousel-indicators" id="portrait-indicators"></div>
            </div>

            <div class="global-alpha-control">
                <div class="global-slider-container">
                    <span>Î± = 0.00</span>
                    <input type="range" class="global-slider" id="portrait-global-slider" min="0" max="100" value="50">
                    <span>Î± = 1.00</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Citation Footer (commented out for anonymous submission) -->
    <!--
    <footer class="citation-footer">
        <div class="container">
            <h3>Citation</h3>
            <div class="bibtex-container">
                <pre class="bibtex-code">@article{wolf2025adaor,
    title={Continuous Control of Editing Models via Adaptive-Origin Guidance},
    author={Wolf, A. and Patashnik, O. and Katzir, C. and Aberman, K.},
    journal={arXiv preprint},
    year={2025}
}</pre>
                <button class="copy-bibtex-btn" onclick="copyBibTeX()">Copy BibTeX</button>
            </div>
        </div>
    </footer>
    -->

    <script>
        // 81-frame videos for interactive control
        const interactiveVideos = [
            {
                folder: "dog_to_lion_480_832_32",
                title: "Dog to Lion",
                prompt: "replace the dog with a lion",
                alphaValues: ["0.000", "0.032", "0.065", "0.097", "0.129", "0.161", "0.194", "0.226", "0.258", "0.290", "0.323", "0.355", "0.387", "0.419", "0.452", "0.484", "0.516", "0.548", "0.581", "0.613", "0.645", "0.677", "0.710", "0.742", "0.774", "0.806", "0.839", "0.871", "0.903", "0.935", "0.968", "1.000"]
            },
            {
                folder: "bunny_to_chocolate_480_832_32",
                title: "Bunny to Chocolate",
                prompt: "replace the white bunny with a chocolate bunny made of brown chocolate",
                alphaValues: ["0.000", "0.032", "0.065", "0.097", "0.129", "0.161", "0.194", "0.226", "0.258", "0.290", "0.323", "0.355", "0.387", "0.419", "0.452", "0.484", "0.516", "0.548", "0.581", "0.613", "0.645", "0.677", "0.710", "0.742", "0.774", "0.806", "0.839", "0.871", "0.903", "0.935", "0.968", "1.000"]
            },
            {
                folder: "man_to_knight_480_832_32",
                title: "Man to Knight",
                prompt: "Turn the man into a medieval knight",
                alphaValues: ["0.000", "0.032", "0.065", "0.097", "0.129", "0.161", "0.194", "0.226", "0.258", "0.290", "0.323", "0.355", "0.387", "0.419", "0.452", "0.484", "0.516", "0.548", "0.581", "0.613", "0.645", "0.677", "0.710", "0.742", "0.774", "0.806", "0.839", "0.871", "0.903", "0.935", "0.968", "1.000"]
            },
            {
                folder: "yellow_to_kimino_480_832_32",
                title: "Dress to Kimono",
                prompt: "change the yellow dress to a pink kimono",
                alphaValues: ["0.000", "0.032", "0.065", "0.097", "0.129", "0.161", "0.194", "0.226", "0.258", "0.290", "0.323", "0.355", "0.387", "0.419", "0.452", "0.484", "0.516", "0.548", "0.581", "0.613", "0.645", "0.677", "0.710", "0.742", "0.774", "0.806", "0.839", "0.871", "0.903", "0.935", "0.968", "1.000"]
            },
            {
                folder: "dog_to_tiger",
                title: "Dog to Tiger",
                prompt: "Replace the dog with a tiger",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
            }
        ];

        // Other videos
        const otherVideos = [
            {
                folder: "bald_to_hair_480_832_32",
                title: "Bald to Hair",
                prompt: "add long healthy hair on the person's head",
                alphaValues: ["0.000", "0.032", "0.065", "0.097", "0.129", "0.161", "0.194", "0.226", "0.258", "0.290", "0.323", "0.355", "0.387", "0.419", "0.452", "0.484", "0.516", "0.548", "0.581", "0.613", "0.645", "0.677", "0.710", "0.742", "0.774", "0.806", "0.839", "0.871", "0.903", "0.935", "0.968", "1.000"]
            },
            // {
            //     folder: "bold man to long hair",
            //     title: "Bald to Long Hair",
            //     prompt: "Add full thick long hair to the man",
            //     alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
            //     slowPlayback: true
            // },
            {
                folder: "gold teeth",
                title: "Gold Teeth",
                prompt: "Replace the man's teeth color with gold",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                slowPlayback: true
            },
            {
                folder: "pool  to snow - gil prompt",
                title: "Pool to Snow",
                prompt: "Change the weather to extreme winter conditions with heavy snowfall",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                slowPlayback: true
            },
            {
                folder: "skinny dude to super strong shirtless",
                title: "Skinny to Muscular",
                prompt: "Transform the thin man into a muscular physique",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                slowPlayback: true
            },
            {
                folder: "Freckles vid",
                title: "Add Freckles",
                prompt: "Add natural freckles to the faces of both the mother and the son",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                slowPlayback: true
            }
        ];

        // Image examples
        const imageLandscape = [
            {
                folder: "add_a_beard_fine",
                title: "Add Beard",
                prompt: "Add a thick long beard to the man's jaw",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
            },
            {
                folder: "old castle to new",
                title: "Old Castle to New",
                prompt: "Transform the abandoned castle into a well-maintained castle",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
            },
            {
                folder: "old house to new",
                title: "Old House to New",
                prompt: "Transform the old neglected house into a new, modern, well-maintained home",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
            }
        ];

        const referenceGroups = [
            {
                title: "Dog Reference",
                description: "",
                sourceFolder: "dog_to_tiger_good",
                edits: [
                    {
                        folder: "dog_to_tiger_good",
                        title: "Dog to Tiger",
                        prompt: "Replace the dog with a tiger",
                        alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
                    },
                    {
                        folder: "dog_to_cow",
                        title: "Dog to Cow",
                        prompt: "Replace the dog with a cow",
                        alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
                    },
                    {
                        folder: "dog_add_autumn_leaves",
                        title: "Autumn Leaves",
                        prompt: "The season is autumn, the floor is covered with orange leaves",
                        alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
                    }
                ]
            },
            {
                title: "Horse Reference",
                description: "All edits share the same horse source image.",
                sourceFolder: "horse to unicorn",
                edits: [
                    {
                        folder: "horse to unicorn",
                        title: "Horse to Unicorn",
                        prompt: "Transform the horse into a light pastel pink unicorn",
                        alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
                    },
                    {
                        folder: "horse to stone",
                        title: "Horse to Stone",
                        prompt: "Transform the horse into a marble stone sculpture",
                        alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
                    },
                    // {
                    //     folder: "horse to wood",
                    //     title: "Horse to Wood",
                    //     prompt: "Transform the horse into a carved wooden horse",
                    //     alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
                    // },
                    {
                        folder: "horse to digital voxel",
                        title: "Horse to Voxel",
                        prompt: "Transform the horse into a pixelated digital voxel horse",
                        alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"]
                    }
                ]
            }
        ];

        // Portrait examples (different aspect ratio)
        const portraitExamples = [
            {
                folder: "teddy bear to robot bear",
                title: "Teddy to Robot",
                prompt: "Transform the teddy bear into a robotic bear with mechanical parts",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                type: "image"
            },
            {
                folder: "wool flower",
                title: "Wool Flower",
                prompt: "Transform the plant's petals into embroidered bluish wool fabric",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                type: "image"
            },
            {
                folder: "camel_to_snow",
                title: "Camel in Snow",
                prompt: "Add snow covering the ground making it look like winter and add the northern lights",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                type: "image"
            },
            {
                folder: "girl_to_smile",
                title: "Add Smile",
                prompt: "Transform the mouth and lower jaw to be smiling and happy",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                type: "image"
            },
            {
                folder: "frozen_cherry",
                title: "Frozen Cherry",
                prompt: "Add a frozen layer over the cherry, as if lightly frosted",
                alphaValues: ["0.000", "0.143", "0.286", "0.429", "0.571", "0.714", "0.857", "1.000"],
                type: "video",
                slowPlayback: true
            }
        ];

        const videoBasePath = "assets/videos/";
        const imageBasePath = "assets/images/";

        // Combine all videos
        const allVideos = [...interactiveVideos, ...otherVideos];

        // Video Carousel
        let currentVideoSlide = 0;
        const videoCarousel = {
            container: null,
            slider: null,
            alphaDisplay: null,
            currentAlpha: 0.5,

            init() {
                this.container = document.getElementById('video-carousel');
                this.slider = document.getElementById('video-global-slider');
                this.alphaDisplay = document.getElementById('video-alpha-display');
                
                this.populateSlides();
                this.setupNavigation();
                this.setupGlobalSlider();
            },

            populateSlides() {
                allVideos.forEach((example, index) => {
                    const slide = document.createElement('div');
                    slide.className = 'carousel-slide';
                    
                    const slowAttr = example.slowPlayback ? 'data-slow="true"' : '';
                    
                    slide.innerHTML = `
                        <div class="slider-demo-container">
                            <div class="prompt-box">
                                <div class="prompt-text">"${example.prompt}"</div>
                            </div>
                            <div style="display: flex; gap: 20px; justify-content: center; align-items: center; flex-wrap: wrap;">
                                <div style="text-align: center;">
                                    <div style="font-weight: bold; margin-bottom: 10px; color: #d0d0d0;">Source (Î± = 0.00)</div>
                                    <video autoplay loop muted playsinline ${slowAttr}
                                           class="video-source-${index}"
                                           data-slow="${example.slowPlayback || false}"
                                           style="max-width: 400px; width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
                                           src="${videoBasePath}${encodeURIComponent(example.folder)}/alpha/${example.alphaValues[0]}.mp4"></video>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-weight: bold; margin-bottom: 10px; color: #3498db;">Edited (Î± = <span class="video-alpha-label-${index}">0.50</span>)</div>
                                    <video autoplay loop muted playsinline ${slowAttr}
                                           class="video-edited-${index}"
                                           data-folder="${encodeURIComponent(example.folder)}"
                                           data-alphas='${JSON.stringify(example.alphaValues)}'
                                           data-slow="${example.slowPlayback || false}"
                                           style="max-width: 400px; width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
                                           src="${videoBasePath}${encodeURIComponent(example.folder)}/alpha/${example.alphaValues[Math.floor(example.alphaValues.length / 2)]}.mp4"></video>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    this.container.appendChild(slide);
                    
                    // Set slow playback rate for both videos after loading
                    if (example.slowPlayback) {
                        setTimeout(() => {
                            const sourceVid = document.querySelector(`.video-source-${index}`);
                            const editedVid = document.querySelector(`.video-edited-${index}`);
                            if (sourceVid) {
                                sourceVid.addEventListener('loadeddata', () => {
                                    sourceVid.playbackRate = 0.333;
                                }, { once: true });
                                if (sourceVid.readyState >= 2) {
                                    sourceVid.playbackRate = 0.333;
                                }
                            }
                            if (editedVid) {
                                editedVid.addEventListener('loadeddata', () => {
                                    editedVid.playbackRate = 0.333;
                                }, { once: true });
                                if (editedVid.readyState >= 2) {
                                    editedVid.playbackRate = 0.333;
                                }
                            }
                        }, 100);
                    }
                });

                // Create indicators
                const indicators = document.getElementById('video-indicators');
                allVideos.forEach((_, index) => {
                    const dot = document.createElement('span');
                    dot.className = 'carousel-dot' + (index === 0 ? ' active' : '');
                    dot.onclick = () => this.goToSlide(index);
                    indicators.appendChild(dot);
                });
            },

            setupNavigation() {
                document.getElementById('video-prev').onclick = () => this.prevSlide();
                document.getElementById('video-next').onclick = () => this.nextSlide();
            },

            setupGlobalSlider() {
                this.slider.addEventListener('input', (e) => {
                    const value = e.target.value / 100;
                    this.setAlpha(value);
                });
                this.setAlpha(this.currentAlpha);
            },

            updateSliderBackground(value) {
                this.slider.style.background = `linear-gradient(to right, #3498db 0%, #3498db ${value}%, #e0e0e0 ${value}%, #e0e0e0 100%)`;
            },

            updateCurrentVideo() {
                const example = allVideos[currentVideoSlide];
                const alphaIndex = Math.round(this.currentAlpha * (example.alphaValues.length - 1));
                const alphaValue = example.alphaValues[alphaIndex];
                
                const video = document.querySelector(`.video-edited-${currentVideoSlide}`);
                const sourceVideo = document.querySelector(`.video-source-${currentVideoSlide}`);
                const label = document.querySelector(`.video-alpha-label-${currentVideoSlide}`);
                
                if (video && label) {
                    const folder = video.dataset.folder;
                    const isSlow = video.dataset.slow === 'true';
                    video.src = `${videoBasePath}${folder}/alpha/${alphaValue}.mp4`;
                    label.textContent = alphaValue;
                    
                    // Restart both videos from the beginning
                    video.addEventListener('loadeddata', () => {
                        if (isSlow) {
                            video.playbackRate = 0.333;
                        }
                        video.currentTime = 0;
                        video.play();
                        
                        // Also restart the source video with matching playback rate
                        if (sourceVideo) {
                            if (isSlow) {
                                sourceVideo.playbackRate = 0.333;
                            }
                            sourceVideo.currentTime = 0;
                            sourceVideo.play();
                        }
                    }, { once: true });
                }
            },

            goToSlide(index) {
                currentVideoSlide = index;
                this.container.style.transform = `translateX(-${index * 100}%)`;
                
                // Update indicators
                document.querySelectorAll('#video-indicators .carousel-dot').forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });

                // Restart all videos in the current slide with proper playback rate
                const currentSlide = this.container.children[index];
                const example = allVideos[index];
                const isSlow = example.slowPlayback || false;
                
                if (currentSlide) {
                    const videos = currentSlide.querySelectorAll('video');
                    videos.forEach(v => {
                        if (isSlow) {
                            v.playbackRate = 0.333;
                        }
                        v.currentTime = 0;
                        v.play();
                    });
                }

                this.updateCurrentVideo();
            },

            nextSlide() {
                this.goToSlide((currentVideoSlide + 1) % allVideos.length);
            },

            prevSlide() {
                this.goToSlide((currentVideoSlide - 1 + allVideos.length) % allVideos.length);
            },

            setAlpha(value) {
                this.currentAlpha = value;
                if (this.slider) {
                    this.slider.value = Math.round(value * 100);
                    if (this.alphaDisplay) {
                        this.alphaDisplay.textContent = `Î± = ${value.toFixed(1)}`;
                    }
                    this.updateSliderBackground(this.slider.value);
                }
                this.updateCurrentVideo();
            }
        };

        // Image Carousel
        let currentImageSlide = 0;
        const imageCarousel = {
            container: null,
            slider: null,
            alphaDisplay: null,
            currentAlpha: 0.5,

            init() {
                this.container = document.getElementById('image-carousel');
                this.slider = document.getElementById('image-global-slider');
                this.alphaDisplay = document.getElementById('image-alpha-display');
                
                this.populateSlides();
                this.setupNavigation();
                this.setupGlobalSlider();
            },

            populateSlides() {
                imageLandscape.forEach((example, index) => {
                    const slide = document.createElement('div');
                    slide.className = 'carousel-slide';
                    
                    slide.innerHTML = `
                        <div class="slider-demo-container">
                            <div class="prompt-box">
                                <div class="prompt-text">"${example.prompt}"</div>
                            </div>
                            <div style="display: flex; gap: 20px; justify-content: center; align-items: flex-start; flex-wrap: wrap;">
                                <div style="text-align: center; flex: 1; min-width: 300px; max-width: 500px;">
                                    <div style="font-weight: bold; margin-bottom: 10px; color: #d0d0d0;">Source (Î± = 0.00)</div>
                                    <img src="${imageBasePath}${encodeURIComponent(example.folder)}/alpha/${example.alphaValues[0]}.jpg"
                                         style="width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                                </div>
                                <div style="text-align: center; flex: 1; min-width: 300px; max-width: 500px;">
                                    <div style="font-weight: bold; margin-bottom: 10px; color: #3498db;">Edited (Î± = <span class="image-alpha-label-${index}">0.57</span>)</div>
                                    <img class="image-edited-${index}"
                                         data-folder="${encodeURIComponent(example.folder)}"
                                         data-alphas='${JSON.stringify(example.alphaValues)}'
                                         src="${imageBasePath}${encodeURIComponent(example.folder)}/alpha/${example.alphaValues[Math.floor(example.alphaValues.length / 2)]}.jpg"
                                         style="width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                                </div>
                            </div>
                        </div>
                    `;
                    
                    this.container.appendChild(slide);
                });

                // Create indicators
                const indicators = document.getElementById('image-indicators');
                imageLandscape.forEach((_, index) => {
                    const dot = document.createElement('span');
                    dot.className = 'carousel-dot' + (index === 0 ? ' active' : '');
                    dot.onclick = () => this.goToSlide(index);
                    indicators.appendChild(dot);
                });
            },

            setupNavigation() {
                document.getElementById('image-prev').onclick = () => this.prevSlide();
                document.getElementById('image-next').onclick = () => this.nextSlide();
            },

            setupGlobalSlider() {
                this.slider.addEventListener('input', (e) => {
                    const value = e.target.value / 100;
                    this.setAlpha(value);
                });
                this.setAlpha(this.currentAlpha);
            },

            updateSliderBackground(value) {
                this.slider.style.background = `linear-gradient(to right, #3498db 0%, #3498db ${value}%, #e0e0e0 ${value}%, #e0e0e0 100%)`;
            },

            updateCurrentImage() {
                const example = imageLandscape[currentImageSlide];
                const alphaIndex = Math.round(this.currentAlpha * (example.alphaValues.length - 1));
                const alphaValue = example.alphaValues[alphaIndex];
                
                const img = document.querySelector(`.image-edited-${currentImageSlide}`);
                const label = document.querySelector(`.image-alpha-label-${currentImageSlide}`);
                
                if (img && label) {
                    const folder = img.dataset.folder;
                    img.src = `${imageBasePath}${folder}/alpha/${alphaValue}.jpg`;
                    label.textContent = alphaValue;
                }
            },

            goToSlide(index) {
                currentImageSlide = index;
                this.container.style.transform = `translateX(-${index * 100}%)`;
                
                // Update indicators
                document.querySelectorAll('#image-indicators .carousel-dot').forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });

                this.updateCurrentImage();
            },

            nextSlide() {
                this.goToSlide((currentImageSlide + 1) % imageLandscape.length);
            },

            prevSlide() {
                this.goToSlide((currentImageSlide - 1 + imageLandscape.length) % imageLandscape.length);
            },

            setAlpha(value) {
                this.currentAlpha = value;
                if (this.slider) {
                    this.slider.value = Math.round(value * 100);
                    if (this.alphaDisplay) {
                        this.alphaDisplay.textContent = value.toFixed(2);
                    }
                    this.updateSliderBackground(this.slider.value);
                }
                this.updateCurrentImage();
            }
        };

        // Reference Image Carousel
        let currentReferenceSlide = 0;
        const referenceCarousel = {
            container: null,
            slider: null,
            alphaDisplay: null,
            currentAlpha: 0.5,

            init() {
                this.container = document.getElementById('reference-carousel');
                this.slider = document.getElementById('reference-global-slider');
                this.alphaDisplay = document.getElementById('reference-alpha-display');

                this.populateSlides();
                this.setupNavigation();
                this.setupGlobalSlider();
            },

            populateSlides() {
                referenceGroups.forEach((group, groupIndex) => {
                    const slide = document.createElement('div');
                    slide.className = 'carousel-slide';

                    const editsHtml = group.edits.map((edit, editIndex) => `
                        <div style="text-align: center; flex: 1; min-width: 240px; max-width: 320px;">
                            <div class="reference-edit-prompt prompt-text">"${edit.prompt}"</div>
                            <img class="reference-edited-${groupIndex}-${editIndex}"
                                 data-reference-edit="true"
                                 data-folder="${encodeURIComponent(edit.folder)}"
                                 data-alphas='${JSON.stringify(edit.alphaValues)}'
                                 data-label-class="reference-alpha-label-${groupIndex}-${editIndex}"
                                 src="${imageBasePath}${encodeURIComponent(edit.folder)}/alpha/${edit.alphaValues[Math.floor(edit.alphaValues.length / 2)]}.jpg"
                                 style="width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                        </div>
                    `).join('');

                    slide.innerHTML = `
                        <div class="slider-demo-container">
                            <div style="display: flex; flex-direction: column; gap: 20px; justify-content: center; align-items: center;">
                                <div style="text-align: center; width: 100%; max-width: 420px;">
                                    <div style="font-weight: bold; margin-bottom: 10px; color: #d0d0d0;">Source (Î± = 0.00)</div>
                                    <img src="${imageBasePath}${encodeURIComponent(group.sourceFolder)}/alpha/0.000.jpg"
                                         style="width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                                </div>
                                <div style="display: flex; gap: 20px; justify-content: center; align-items: flex-start; flex-wrap: wrap; width: 100%;">
                                    ${editsHtml}
                                </div>
                            </div>
                        </div>
                    `;

                    this.container.appendChild(slide);
                });

                const indicators = document.getElementById('reference-indicators');
                referenceGroups.forEach((_, index) => {
                    const dot = document.createElement('span');
                    dot.className = 'carousel-dot' + (index === 0 ? ' active' : '');
                    dot.onclick = () => this.goToSlide(index);
                    indicators.appendChild(dot);
                });
            },

            setupNavigation() {
                document.getElementById('reference-prev').onclick = () => this.prevSlide();
                document.getElementById('reference-next').onclick = () => this.nextSlide();
            },

            setupGlobalSlider() {
                this.slider.addEventListener('input', (e) => {
                    const value = e.target.value / 100;
                    this.setAlpha(value);
                });

                this.setAlpha(this.currentAlpha);
            },

            updateSliderBackground(value) {
                this.slider.style.background = `linear-gradient(to right, #3498db 0%, #3498db ${value}%, #e0e0e0 ${value}%, #e0e0e0 100%)`;
            },

            updateCurrentReference() {
                const slide = this.container.children[currentReferenceSlide];
                if (!slide) return;

                const editedItems = slide.querySelectorAll('[data-reference-edit="true"]');
                editedItems.forEach((item) => {
                    const alphas = JSON.parse(item.dataset.alphas || '[]');
                    if (!alphas.length) return;
                    const alphaIndex = Math.round(this.currentAlpha * (alphas.length - 1));
                    const alphaValue = alphas[alphaIndex];
                    const folder = item.dataset.folder;
                    const labelClass = item.dataset.labelClass;
                    const label = slide.querySelector(`.${labelClass}`);
                    item.src = `${imageBasePath}${folder}/alpha/${alphaValue}.jpg`;
                    if (label) {
                        label.textContent = alphaValue;
                    }
                });
            },

            goToSlide(index) {
                currentReferenceSlide = index;
                this.container.style.transform = `translateX(-${index * 100}%)`;

                document.querySelectorAll('#reference-indicators .carousel-dot').forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });

                this.updateCurrentReference();
            },

            nextSlide() {
                this.goToSlide((currentReferenceSlide + 1) % referenceGroups.length);
            },

            prevSlide() {
                this.goToSlide((currentReferenceSlide - 1 + referenceGroups.length) % referenceGroups.length);
            },

            setAlpha(value) {
                this.currentAlpha = value;
                if (this.slider) {
                    this.slider.value = Math.round(value * 100);
                    if (this.alphaDisplay) {
                        this.alphaDisplay.textContent = value.toFixed(2);
                    }
                    this.updateSliderBackground(this.slider.value);
                }
                this.updateCurrentReference();
            }
        };

        // Portrait Carousel (for different aspect ratio examples)
        let currentPortraitSlide = 0;
        const portraitCarousel = {
            container: null,
            slider: null,
            alphaDisplay: null,
            currentAlpha: 0.5,
            visibleCount: 2,

            init() {
                this.container = document.getElementById('portrait-carousel');
                this.slider = document.getElementById('portrait-global-slider');
                this.alphaDisplay = document.getElementById('portrait-alpha-display');
                
                this.populateSlides();
                this.setupNavigation();
                this.setupGlobalSlider();
            },

            populateSlides() {
                portraitExamples.forEach((example, index) => {
                    const slide = document.createElement('div');
                    slide.className = 'carousel-slide';
                    
                    const isVideo = example.type === 'video';
                    const slowAttr = example.slowPlayback ? 'data-slow="true"' : '';
                    const basePath = isVideo ? videoBasePath : imageBasePath;
                    const fileExt = isVideo ? 'mp4' : 'jpg';
                    const midIndex = Math.floor(example.alphaValues.length / 2);
                    
                    if (isVideo) {
                        slide.innerHTML = `
                            <div class="slider-demo-container">
                                <div class="prompt-box">
                                    <div class="prompt-text">"${example.prompt}"</div>
                                </div>
                                <div class="portrait-pair-row">
                                    <div class="portrait-pair-item">
                                        <div style="font-weight: bold; margin-bottom: 10px; color: #d0d0d0;">Source (Î± = 0.00)</div>
                                        <video autoplay loop muted playsinline ${slowAttr}
                                               class="portrait-video-source-${index}"
                                               data-slow="${example.slowPlayback || false}"
                                               style="max-width: 400px; width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
                                               src="${basePath}${encodeURIComponent(example.folder)}/alpha/${example.alphaValues[0]}.${fileExt}"></video>
                                    </div>
                                    <div class="portrait-pair-item">
                                        <div style="font-weight: bold; margin-bottom: 10px; color: #3498db;">Edited (Î± = <span class="portrait-alpha-label-${index}">0.50</span>)</div>
                                        <video autoplay loop muted playsinline ${slowAttr}
                                               class="portrait-edited-${index}"
                                               data-folder="${encodeURIComponent(example.folder)}"
                                               data-alphas='${JSON.stringify(example.alphaValues)}'
                                               data-slow="${example.slowPlayback || false}"
                                               data-type="video"
                                               style="max-width: 400px; width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
                                               src="${basePath}${encodeURIComponent(example.folder)}/alpha/${example.alphaValues[midIndex]}.${fileExt}"></video>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                        // Set slow playback for videos
                        if (example.slowPlayback) {
                            setTimeout(() => {
                                const sourceVid = document.querySelector(`.portrait-video-source-${index}`);
                                const editedVid = document.querySelector(`.portrait-edited-${index}`);
                                if (sourceVid) {
                                    sourceVid.addEventListener('loadeddata', () => {
                                        sourceVid.playbackRate = 0.333;
                                    }, { once: true });
                                    if (sourceVid.readyState >= 2) {
                                        sourceVid.playbackRate = 0.333;
                                    }
                                }
                                if (editedVid) {
                                    editedVid.addEventListener('loadeddata', () => {
                                        editedVid.playbackRate = 0.333;
                                    }, { once: true });
                                    if (editedVid.readyState >= 2) {
                                        editedVid.playbackRate = 0.333;
                                    }
                                }
                            }, 100);
                        }
                    } else {
                        // Image
                        slide.innerHTML = `
                            <div class="slider-demo-container">
                                <div class="prompt-box">
                                    <div class="prompt-text">"${example.prompt}"</div>
                                </div>
                                <div class="portrait-pair-row">
                                    <div class="portrait-pair-item">
                                        <div style="font-weight: bold; margin-bottom: 10px; color: #d0d0d0;">Source (Î± = 0.00)</div>
                                        <img src="${basePath}${encodeURIComponent(example.folder)}/alpha/${example.alphaValues[0]}.${fileExt}"
                                             style="width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                                    </div>
                                    <div class="portrait-pair-item">
                                        <div style="font-weight: bold; margin-bottom: 10px; color: #3498db;">Edited (Î± = <span class="portrait-alpha-label-${index}">0.57</span>)</div>
                                        <img class="portrait-edited-${index}"
                                             data-folder="${encodeURIComponent(example.folder)}"
                                             data-alphas='${JSON.stringify(example.alphaValues)}'
                                             data-type="image"
                                             src="${basePath}${encodeURIComponent(example.folder)}/alpha/${example.alphaValues[midIndex]}.${fileExt}"
                                             style="width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                    
                    this.container.appendChild(slide);
                });

                // Create indicators (one per position)
                const indicators = document.getElementById('portrait-indicators');
                const maxIndex = Math.max(0, portraitExamples.length - this.visibleCount);
                for (let index = 0; index <= maxIndex; index += 1) {
                    const dot = document.createElement('span');
                    dot.className = 'carousel-dot' + (index === 0 ? ' active' : '');
                    dot.onclick = () => this.goToSlide(index);
                    indicators.appendChild(dot);
                }
            },

            setupNavigation() {
                document.getElementById('portrait-prev').onclick = () => this.prevSlide();
                document.getElementById('portrait-next').onclick = () => this.nextSlide();
            },

            setupGlobalSlider() {
                this.slider.addEventListener('input', (e) => {
                    const value = e.target.value / 100;
                    this.setAlpha(value);
                });
                this.setAlpha(this.currentAlpha);
            },

            updateSliderBackground(value) {
                this.slider.style.background = `linear-gradient(to right, #3498db 0%, #3498db ${value}%, #e0e0e0 ${value}%, #e0e0e0 100%)`;
            },

            updateCurrent() {
                const updateAtIndex = (index) => {
                    const example = portraitExamples[index];
                    if (!example) return;
                    const alphaIndex = Math.round(this.currentAlpha * (example.alphaValues.length - 1));
                    const alphaValue = example.alphaValues[alphaIndex];

                    const edited = document.querySelector(`.portrait-edited-${index}`);
                    const label = document.querySelector(`.portrait-alpha-label-${index}`);

                    if (edited && label) {
                        const folder = edited.dataset.folder;
                        const isVideo = edited.dataset.type === 'video';
                        const isSlow = edited.dataset.slow === 'true';
                        const basePath = isVideo ? videoBasePath : imageBasePath;
                        const fileExt = isVideo ? 'mp4' : 'jpg';

                        if (isVideo) {
                            const source = document.querySelector(`.portrait-video-source-${index}`);
                            edited.src = `${basePath}${folder}/alpha/${alphaValue}.${fileExt}`;
                            label.textContent = alphaValue;

                            edited.addEventListener('loadeddata', () => {
                                if (isSlow) {
                                    edited.playbackRate = 0.333;
                                }
                                edited.currentTime = 0;
                                edited.play();

                                if (source) {
                                    if (isSlow) {
                                        source.playbackRate = 0.333;
                                    }
                                    source.currentTime = 0;
                                    source.play();
                                }
                            }, { once: true });
                        } else {
                            edited.src = `${basePath}${folder}/alpha/${alphaValue}.${fileExt}`;
                            label.textContent = alphaValue;
                        }
                    }
                };

                updateAtIndex(currentPortraitSlide);
                updateAtIndex(currentPortraitSlide + 1);
            },

            goToSlide(index) {
                const maxIndex = Math.max(0, portraitExamples.length - this.visibleCount);
                const normalizedIndex = ((index % (maxIndex + 1)) + (maxIndex + 1)) % (maxIndex + 1);
                currentPortraitSlide = normalizedIndex;
                const slideWidth = 100 / this.visibleCount;
                this.container.style.transform = `translateX(-${normalizedIndex * slideWidth}%)`;
                
                document.querySelectorAll('#portrait-indicators .carousel-dot').forEach((dot, i) => {
                    dot.classList.toggle('active', i === normalizedIndex);
                });

                const restartVideoAtIndex = (slideIndex) => {
                    const currentSlide = this.container.children[slideIndex];
                    const example = portraitExamples[slideIndex];
                    if (currentSlide && example && example.type === 'video') {
                        const isSlow = example.slowPlayback || false;
                        const videos = currentSlide.querySelectorAll('video');
                        videos.forEach(v => {
                            if (isSlow) {
                                v.playbackRate = 0.333;
                            }
                            v.currentTime = 0;
                            v.play();
                        });
                    }
                };

                restartVideoAtIndex(currentPortraitSlide);
                restartVideoAtIndex(currentPortraitSlide + 1);

                this.updateCurrent();
            },

            nextSlide() {
                const maxIndex = Math.max(0, portraitExamples.length - this.visibleCount);
                this.goToSlide((currentPortraitSlide + 1) % (maxIndex + 1));
            },

            prevSlide() {
                const maxIndex = Math.max(0, portraitExamples.length - this.visibleCount);
                this.goToSlide((currentPortraitSlide - 1 + (maxIndex + 1)) % (maxIndex + 1));
            },

            setAlpha(value) {
                this.currentAlpha = value;
                if (this.slider) {
                    this.slider.value = Math.round(value * 100);
                    if (this.alphaDisplay) {
                        this.alphaDisplay.textContent = value.toFixed(2);
                    }
                    this.updateSliderBackground(this.slider.value);
                }
                this.updateCurrent();
            }
        };

        // Video Modal
        function setupVideoModal() {
            const modal = document.getElementById('video-modal');
            const modalVideo = document.getElementById('modal-video');
            const modalLabel = document.getElementById('modal-label');
            const modalClose = document.getElementById('modal-close');

            document.addEventListener('click', function(e) {
                if (e.target.tagName === 'VIDEO' && !modal.contains(e.target)) {
                    const videoSrc = e.target.src;
                    const isSlow = e.target.hasAttribute('data-slow');
                    const label = e.target.closest('.alpha-video-item')?.querySelector('.alpha-label')?.textContent ||
                                  e.target.closest('.transient-video-container')?.querySelector('.transient-label')?.textContent ||
                                  'Video';

                    modalVideo.src = videoSrc;
                    modalVideo.playbackRate = isSlow ? 0.333 : 1.0;
                    modalLabel.textContent = label;
                    modal.classList.add('active');
                    modalVideo.play();
                }
            });

            modalClose.addEventListener('click', function() {
                modal.classList.remove('active');
                modalVideo.pause();
                modalVideo.src = '';
            });

            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    modalVideo.pause();
                    modalVideo.src = '';
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    modal.classList.remove('active');
                    modalVideo.pause();
                    modalVideo.src = '';
                }
            });
        }

        // Copy BibTeX
        function copyBibTeX() {
            const bibtex = document.querySelector('.bibtex-code').textContent;
            navigator.clipboard.writeText(bibtex).then(() => {
                const btn = document.querySelector('.copy-bibtex-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = originalText, 2000);
            });
        }

        // Header Demo Video Slider Sync
        function setupHeaderDemo() {
            const video = document.getElementById('header-demo-video');
            const slider = document.getElementById('header-demo-slider');
            const alphaDisplay = document.getElementById('alpha-display');

            if (!video || !slider) return;

            // Update slider background gradient
            function updateSliderBackground(value) {
                const percentage = value;
                slider.style.background = `linear-gradient(to right, #3498db 0%, #3498db ${percentage}%, #e0e0e0 ${percentage}%, #e0e0e0 100%)`;
            }

            // Slider input - seek video and update display
            slider.addEventListener('input', function() {
                const percentage = this.value;
                const duration = video.duration;
                
                if (duration && !isNaN(duration)) {
                    video.currentTime = (percentage / 100) * duration;
                    const alpha = (percentage / 100).toFixed(2);
                    alphaDisplay.textContent = `Î± = ${alpha}`;
                    updateSliderBackground(percentage);
                }
            });

            // Video timeupdate - update slider position
            video.addEventListener('timeupdate', function() {
                if (!slider.matches(':active')) { // Don't update if user is dragging
                    const percentage = (video.currentTime / video.duration) * 100;
                    slider.value = percentage;
                    const alpha = (percentage / 100).toFixed(2);
                    alphaDisplay.textContent = `Î± = ${alpha}`;
                    updateSliderBackground(percentage);
                }
            });

            // Start playing when loaded
            video.addEventListener('loadeddata', function() {
                video.play();
                updateSliderBackground(0);
            });

            // Loop the video
            video.loop = true;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupHeaderDemo();
            videoCarousel.init();
            imageCarousel.init();
            referenceCarousel.init();
            portraitCarousel.init();
            setupVideoModal();
        });
    </script>
</body>
</html>
